<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>WFM Shift Scheduler - May 2025</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f0f0f5;
      padding: 20px;
    }

    h1 {
      text-align: center;
      color: #333;
    }

    .controls {
      text-align: center;
      margin-bottom: 20px;
    }

    table {
      border-collapse: collapse;
      width: 100%;
      background: white;
      margin-bottom: 20px;
    }

    th, td {
      border: 1px solid #ccc;
      text-align: center;
      padding: 8px;
    }

    th {
      background-color: #6c63ff;
      color: white;
    }

    select {
      width: 100%;
    }

    .working { background-color: #d4edda; }
    .leave { background-color: #f8d7da; }
    .off { background-color: #e2e3e5; }

    .legend {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-bottom: 20px;
    }

    .legend-item {
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .color-box {
      width: 20px;
      height: 20px;
      border: 1px solid #ccc;
    }

    .color-working { background-color: #d4edda; }
    .color-leave { background-color: #f8d7da; }
    .color-off { background-color: #e2e3e5; }
  </style>
</head>
<body>

<h1>WFM Shift Scheduler - May 2025</h1>

<div class="controls">
  <button onclick="submitShifts()">Submit</button>
  <button onclick="toggleView()">Toggle View/Edit</button>
</div>

<div class="legend">
  <div class="legend-item"><div class="color-box color-working"></div>Working</div>
  <div class="legend-item"><div class="color-box color-leave"></div>Leave</div>
  <div class="legend-item"><div class="color-box color-off"></div>Off</div>
</div>

<div id="scheduler-container"></div>

<script>
  const agents = Array.from({ length: 10 }, (_, i) => `Agent ${i + 1}`);
  const daysInMay = 31;
  const scheduleDataKey = 'agentScheduleMay2025';
  let viewMode = false;

  function loadSchedule() {
    const saved = localStorage.getItem(scheduleDataKey);
    return saved ? JSON.parse(saved) : {};
  }

  function saveSchedule(data) {
    localStorage.setItem(scheduleDataKey, JSON.stringify(data));
  }

  function getShiftColor(shift) {
    if (shift === 'Working') return 'working';
    if (shift === 'Leave') return 'leave';
    if (shift === 'Off') return 'off';
    return '';
  }

  function buildScheduler() {
    const schedule = loadSchedule();
    const container = document.getElementById('scheduler-container');
    container.innerHTML = '';

    const table = document.createElement('table');
    const headerRow = document.createElement('tr');
    headerRow.innerHTML = `<th>Agent</th>`;
    for (let d = 1; d <= daysInMay; d++) {
      headerRow.innerHTML += `<th>${d}</th>`;
    }
    table.appendChild(headerRow);

    agents.forEach(agent => {
      const row = document.createElement('tr');
      const agentCell = document.createElement('td');
      agentCell.textContent = agent;
      row.appendChild(agentCell);

      for (let d = 1; d <= daysInMay; d++) {
        const dayKey = `2025-05-${d.toString().padStart(2, '0')}`;
        const cell = document.createElement('td');

        const currentShift = schedule[agent]?.[dayKey] || '';

        if (viewMode) {
          cell.textContent = currentShift;
          cell.className = getShiftColor(currentShift);
        } else {
          const select = document.createElement('select');
          ['','Working','Leave','Off'].forEach(shift => {
            const option = document.createElement('option');
            option.value = shift;
            option.text = shift;
            if (shift === currentShift) option.selected = true;
            select.appendChild(option);
          });
          select.dataset.agent = agent;
          select.dataset.day = dayKey;
          cell.appendChild(select);
        }

        row.appendChild(cell);
      }

      table.appendChild(row);
    });

    container.appendChild(table);
  }

  function submitShifts() {
    const schedule = loadSchedule();
    const selects = document.querySelectorAll('select');

    selects.forEach(select => {
      const agent = select.dataset.agent;
      const day = select.dataset.day;
      const shift = select.value;

      if (!schedule[agent]) {
        schedule[agent] = {};
      }

      schedule[agent][day] = shift;
    });

    saveSchedule(schedule);
    alert('Schedule saved!');
    if (viewMode) buildScheduler();
  }

  function toggleView() {
    viewMode = !viewMode;
    buildScheduler();
  }

  // Initial load
  buildScheduler();
</script>

</body>
</html>
